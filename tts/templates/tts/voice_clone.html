{% load static %}

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Voice Clone</title>
    <link rel="shortcut icon" href="{% static "imgs/voice_clone.jpg" %}" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>
  <body>
    <style>
      #upload_btn{
        cursor: pointer;
        font-size: 1.1rem;
      }

      input[type=range]{
        width: 100%;
        cursor: pointer;
        border-radius: 1.3px;
      }
    </style>
    <div class="container-fluid p-3" style="background-color: #f9f9f9;">
      <h2 class="p-4">
        <img src="{% static "imgs/voice_clone.jpg" %}" alt="" width="50px">
        Voice Clone
      </h2>
      <div class="p-4">
        <form action="handle_voice" method="POST">
            {% csrf_token %}
            <div class="form-group">
              <div class="card" style="height: 400px;">
                <div class="card-body d-flex justify-content-center align-items-center">
                  <label for="voice" id="upload_btn" class="d-block text-center">
                    <i class="bi bi-upload"></i>
                    <p>Drop Audio Here <br>-or- <br> Click to Upload</p>
                  </label>
                  {{form.voice}}
                </div>
              </div>
            </div>

            <div class="form-group mt-2">
              <div class="card" style="height:auto">
                <div class="card-body mb-3 border-bottom">
                  <label for="" class="bg-secondary-subtle px-3 float-end">0</label>
                  <label for="">Diffusion Steps</label> <br>
                  <small class="text-secondary">
                    Theoretically, higher should be better quality,
                    but we cannot notice a difference <br>
                    Try with lower steps first - it is faster
                  </small>
                  {{form.diffusion}}
                </div>

                <div class="card-body mb-3 border-bottom">
                  <label for="" class="bg-secondary-subtle px-3 float-end">0</label>
                  <label for="">Embedding Scale (READ WARNING BELOW)</label> <br>
                  <small class="text-secondary">
                    Defaults to 1. WARNING: if you set this too high, and generate text that's too short you
                    will get static.
                  </small>
                  {{form.embedding_scale}}
                </div>
                <div class="card-body mb-3 border-bottom">
                  <label for="" class="bg-secondary-subtle px-3 float-end">0</label>
                  <label for="">Alpha</label> <br>
                  <small class="text-secondary">
                    Defaults to 0.3
                  </small>
                  {{form.alpha}}                
                </div>
                <div class="card-body mb-3"> 
                  <label for="" class="bg-secondary-subtle px-3 float-end">0</label>
                  <label for="">Beta</label> <br>
                  <small class="text-secondary">
                    Defaults to 0.7
                  </small>
                  {{form.beta}}
                </div>
              </div>
            </div>
            <button class="btn btn-primary float-end mt-2" type="submit"><i class="bi bi-send"></i> Generate</button>
        </form>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
      function changeInput(event, div=1, float=false){
        let value = event.target.value * div;
        let label = event.target.parentElement.querySelector('label');
        label.innerText = float ? value.toFixed(2) : value;
      }
    </script>
  </body>
</html>

